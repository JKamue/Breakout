using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using Breakout.classes;
using Breakout.dtos;
using Newtonsoft.Json;

namespace Breakout
{
    public partial class Screen : Form
    {

        private GridController gridController;

        public Screen()
        {
            InitializeComponent();
            this.FormBorderStyle = FormBorderStyle.FixedDialog;
            this.MaximizeBox = false;
            this.MinimizeBox = false;
            this.StartPosition = FormStartPosition.CenterScreen;
        }

        private void Screen_Load(object sender, EventArgs e)
        {
            var gameSettings = "{ \r\nwidth: 21,\r\nheight: 21,\r\npxWidth: 1000,\r\npxHeight: 500,\r\nbackColor: \"#000000\",\r\nblocks: [\r\n    {\"x\": 0,\"y\": 0,\"color\": \"#8e8e8e\",\"breaks\": false,\"speed\": 0, \"colspan\": 1, \"rowspan\":21},\r\n\t\r\n\t{\"x\": 20,\"y\": 1,\"color\": \"#8e8e8e\",\"breaks\": false,\"speed\": 0, \"colspan\": 1, \"rowspan\":21},\r\n\t\r\n    {\"x\": 1,\"y\": 0,\"color\": \"#8e8e8e\",\"breaks\": false,\"speed\": 0, \"colspan\": 20, \"rowspan\":1},\r\n\t\r\n    {\"x\": 1,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 2,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 3,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 4,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 5,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 6,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 7,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 8,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 9,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 10,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 11,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 12,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 13,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 14,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 15,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 16,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 17,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 18,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 19,\"y\": 4,\"color\": \"#c84848\",\"breaks\": true,\"speed\": 3, \"colspan\": 1, \"rowspan\":1},\r\n\t\r\n    {\"x\": 1,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 2,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 3,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 4,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 5,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 6,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 7,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 8,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 9,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 10,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 11,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 12,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 13,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 14,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 15,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 16,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 17,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 18,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 19,\"y\": 5,\"color\": \"#c66c3a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n\t\r\n    {\"x\": 1,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 2,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 3,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 4,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 5,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 6,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 7,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 8,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 9,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 10,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 11,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 12,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 13,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 14,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 15,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 16,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 17,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 18,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 19,\"y\": 6,\"color\": \"#a2a22a\",\"breaks\": true,\"speed\": 2, \"colspan\": 1, \"rowspan\":1},\r\n\t\r\n    {\"x\": 1,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 2,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 3,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 4,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 5,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 6,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 7,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 8,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 9,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 10,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 11,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 12,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 13,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 14,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 15,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 16,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 17,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 18,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 19,\"y\": 7,\"color\": \"#48a048\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n\t\r\n    {\"x\": 1,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 2,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 3,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 4,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 5,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 6,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 7,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 8,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 9,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 10,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 11,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 12,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 13,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 14,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 15,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 16,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 17,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 18,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n    {\"x\": 19,\"y\": 8,\"color\": \"#4248c8\",\"breaks\": true,\"speed\": 1, \"colspan\": 1, \"rowspan\":1},\r\n]}";
            var grid = JsonConvert.DeserializeObject<GridDto>(gameSettings);

            this.BackColor = grid.backColor;
            this.Width = grid.pxWidth;
            this.Height = grid.pxHeight;

            this.gridController = new GridController(this, grid.pxWidth, grid.pxHeight, 0, 0, grid.height, grid.width);

            foreach (var block in grid.blocks)
            {
                this.gridController.AddBlock(
                    new GridCoordinate(block.x, block.y),
                    block.color,
                    block.breaks,
                    block.speed,
                    block.colspan,
                    block.rowspan);
            }

            var ball2 = new Ball(this, this.gridController, 5, 1, 1, -1, -1,
                260, 300, new Size(15, 15), Color.Red, false, 1);
            var ball3 = new Ball(this, this.gridController, 7, 1, 1, -1, -1,
                260, 350, new Size(5, 5), Color.Yellow, false, 1);
            var ball4 = new Ball(this, this.gridController, 3, 2.5, 1, -1, -1,
                260, 400, new Size(30, 30), Color.Orange, false, 1);
        }
    }
}
